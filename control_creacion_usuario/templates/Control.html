{% extends 'core/Slide.html' %}

{% load static %}

{% block custom_css %}
  <link href="{% static 'css/control.css' %}" rel="stylesheet" />
{% endblock %}

{% block main_content %}
  <section class="container">
    <div class="flex-column-red">
      <div class="flex-row-content p-1">
        <!-- Sección de Información: Gráfico de Barras -->
        <div class="flex-row-dashboard fill-available">
          <div class="flex-column-gap fill-available">
            <div class="info-box p-1 fill-available">
              <h3>Gráfico de Solicitudes y Trabajos Interno</h3>
              <canvas id="puntajePorProfesionalChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Sección de Dashboard -->
        <div class="flex-row-dashboard">
          <!-- Parte Superior del Dashboard -->
          <div class="dashboard-top">
            <div class="flex-column-gap fill-available">
              <div class="dashboard-box-1 p-1 h-full" style="flex-direction: row; gap: 1rem;">
                <h3>Total de Solicitudes</h3>
                <p class="counter" data-target="{{ total_solicitudes }}">0</p>
              </div>
            </div>
          </div>

          <!-- Parte Media del Dashboard -->
          <div class="dashboard-middle fill-available">
            <div class="flex-column-gap fill-available">
              <div class="dashboard-box-3 h-full">
                <h3>En Proceso</h3>
                <p class="counter" data-target="{{ en_proceso }}">0</p>
              </div>
            </div>
            <div class="flex-column-gap fill-available">
              <div class="dashboard-box-4 h-full">
                <h3>Ejecutadas</h3>
                <p class="counter" data-target="{{ ejecutado }}">0</p>
              </div>
            </div>
            <div class="flex-column-gap fill-available">
              <div class="dashboard-box-5 h-full">
                <h3>Rechazadas</h3>
                <p class="counter" data-target="{{ rechazado }}">0</p>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
{% endblock %}

{% block custom_js %}
  <!-- Primero JQUERY -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Luego SELECT2 -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <!-- Luego Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Variables para el gráfico -->
  <script>
    var labels = {{ labels_json|safe }} || [];
    var trabajo_propio = {{ trabajo_propio_json|safe }} || [];
    var trabajo_apoyo = {{ trabajo_apoyo_json|safe }} || [];
    var total_tareas = {{ total_tareas_json|safe }} || [];
    var total_apoyo_tareas = {{ total_apoyos_tareas_json|safe }} || [];
  </script>

  <!-- Finalmente tu control.js -->
  <script src="{% static 'js/control_v1.js' %}"></script>
{% endblock %}

